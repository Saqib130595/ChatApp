@* <div class="notification-popup" style="position:fixed; bottom:20px; right:20px; width:300px; background:#fff; border:1px solid #ccc; padding:10px; box-shadow:0 0 10px rgba(0,0,0,0.3); z-index:1000;">
    <div><b>@User:</b> @Message</div>
    <input @bind="ReplyText" placeholder="Reply..." @onkeypress="HandleKeyPress" style="width: 100%; margin-top: 5px;" />
    <button @onclick="SendReply" style="margin-top:5px; width: 100%;">Send</button>
    <button @onclick="Close" style="margin-top:5px; width: 100%; background:#eee;">Close</button>
</div> *@

<div class="notification-popup" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 300px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.15);
  padding: 12px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  overflow: hidden;
">
    <div style="
    font-weight: 600;
    font-size: 15px;
    margin-bottom: 10px;
    color: #0078ff;
    border-bottom: 1px solid #eee;
    padding-bottom: 6px;
  ">
        <b style="color: red;">@User:</b> @Message
    </div>

    <input @bind="ReplyText"
           placeholder="Reply..."
           @onkeypress="HandleKeyPress"
           style="
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
      outline: none;
      transition: border-color 0.2s ease;
      box-sizing: border-box;
      margin-bottom: 10px;
    "
           onfocus="this.style.borderColor='#0078ff'; this.style.boxShadow='0 0 5px rgba(0,120,255,0.5)';"
           onblur="this.style.borderColor='#ddd'; this.style.boxShadow='none';" />

    <button @onclick="SendReply"
            style="
      width: 100%;
      padding: 10px 0;
      background-color: #0078ff;
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 8px;
      transition: background-color 0.2s ease;
    "
            onmouseover="this.style.backgroundColor='#005bb5';"
            onmouseout="this.style.backgroundColor='#0078ff';">
        Send
    </button>

    <button @onclick="Close"
            style="
      width: 100%;
      padding: 10px 0;
      background: #eee;
      border: none;
      border-radius: 8px;
      color: #666;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.2s ease;
    "
            onmouseover="this.style.backgroundColor='#ddd';"
            onmouseout="this.style.backgroundColor='#eee';">
        Close
    </button>
</div>


@code {
    [Parameter] public string User { get; set; } = "";
    [Parameter] public string Message { get; set; } = "";
    [Parameter] public EventCallback<string> OnReply { get; set; }
    [Parameter] public EventCallback OnClose { get; set; }

    private string ReplyText = "";

    private async Task SendReply()
    {
        if (!string.IsNullOrWhiteSpace(ReplyText))
        {
            await OnReply.InvokeAsync(ReplyText);
            ReplyText = "";
        }
    }

    private async Task HandleKeyPress(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            await SendReply();
        }
    }

    private async Task Close()
    {
        await OnClose.InvokeAsync();
    }
}
